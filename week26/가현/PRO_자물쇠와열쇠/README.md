# 자물쇠와 열쇠 문제

## 1. 문제 요약

- 고고학자 "튜브"는 특이한 형태의 자물쇠와 열쇠를 발견했습니다.
- 자물쇠는 `N x N` 크기의 격자이고, 열쇠는 `M x M` 크기의 격자입니다.
- 열쇠를 회전(90° 단위)하거나 이동하여 자물쇠의 홈(0)을 열쇠의 돌기(1)로 정확히 채워야 합니다.
- 자물쇠와 열쇠가 맞물려 자물쇠의 모든 홈이 채워지면 문이 열립니다.

### 문제 조건

1. 자물쇠의 홈과 열쇠의 돌기가 겹쳐선 안 됩니다.
2. 자물쇠의 홈이 모두 채워져야 합니다.
3. 열쇠는 자유롭게 회전 및 이동이 가능합니다.
4. 자물쇠 영역 밖의 열쇠는 무시합니다.

## 2. 코드 설명

이 코드는 열쇠를 회전 및 이동하며 자물쇠를 열 수 있는지 확인하는 알고리즘입니다.

### 주요 알고리즘

1. **자물쇠 확장**
   - 열쇠가 자물쇠 영역을 자유롭게 이동할 수 있도록 자물쇠를 확장합니다.
2. **열쇠 회전 및 이동**
   - 열쇠를 90°씩 회전하며 모든 가능한 위치로 이동시켜 자물쇠와 맞춰봅니다.
3. **자물쇠와 열쇠의 검증**
   - 열쇠가 자물쇠의 홈을 정확히 채우는지 확인합니다.

---

## 3. 코드 상세 설명

### 자물쇠 확장

- 열쇠가 자물쇠 영역 바깥으로 이동할 수 있도록 자물쇠를 확장합니다.
- 확장된 배열의 크기는 `(N + 2 * (M - 1)) x (N + 2 * (M - 1))`로 설정합니다.
- 원래 자물쇠는 확장된 배열의 중앙에 배치합니다.

---

### 열쇠 회전

- 열쇠를 90°씩 회전하는 로직을 구현합니다.
- 기존 열쇠 배열의 각 좌표를 회전된 배열의 새로운 좌표로 매핑합니다.
- 회전을 통해 모든 방향을 확인합니다.

---

### 자물쇠와 열쇠 검증

- 열쇠를 자물쇠 확장 배열에 배치하여 더하고, 결과를 확인합니다.
- 자물쇠 중심부가 모두 `1`인지 검증하여 열쇠가 자물쇠의 홈을 정확히 채우는지 판단합니다.
- 열쇠가 맞지 않으면, 자물쇠 배열을 복구하여 원래 상태로 되돌립니다.

---

## 4. 시간 복잡도

1. **회전**: 열쇠를 4번 회전 → 상수 시간 (`O(1)`)
2. **이동**: 확장된 자물쇠 크기에서 가능한 위치 탐색
   - 크기: `(N + 2(M - 1))^2`
   - 시간 복잡도: `O((N + 2M - 2)^2)`
3. **검증**: 자물쇠의 크기 `N^2`에 대해 열쇠를 적용하고 확인
   - 시간 복잡도: `O(N^2)`

### 전체 시간 복잡도

- `O(4 * (N + 2M - 2)^2 * N^2)` ≈ `O((N + M)^2 * N^2)`

---

## 결론

- 이 코드는 확장된 자물쇠를 활용하여 열쇠를 자유롭게 회전 및 이동하며 자물쇠를 열 수 있는지 확인합니다.
- 열쇠와 자물쇠의 상태를 복구하여 탐색 과정에서 배열의 무결성을 유지하는 것이 중요한 부분입니다.
